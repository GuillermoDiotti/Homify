import{a as oe}from"./chunk-BXKUOTM4.js";import{a as E,b as T,c as re}from"./chunk-R2CAUFB4.js";import{f as ne}from"./chunk-EURHNXKW.js";import"./chunk-6IF77IJH.js";import"./chunk-GOV7BL6D.js";import"./chunk-UNOCFUQS.js";import{a as ie}from"./chunk-LYRIO5X3.js";import"./chunk-QYMZVT5J.js";import"./chunk-BYXBJQAS.js";import{a as Y}from"./chunk-366TOATH.js";import{a as Z,b as ee}from"./chunk-N3TGZAGV.js";import{a as Q,b as X,e as te}from"./chunk-SYY7HDF4.js";import{m as j,n as B,o as y,p as G,q as O,r as U,s as W,t as $,v as z,w as H,x as J,z as K}from"./chunk-G254O7HO.js";import{$ as k,Ac as V,Jb as s,Kb as L,Lb as R,Rb as C,Sa as p,Sb as D,Ta as g,Tb as S,_ as I,da as q,hb as b,ja as c,jb as l,ka as A,mb as _,nb as M,ob as x,pb as F,qb as r,rb as n,sb as a,yb as f,zb as N}from"./chunk-NEYM5HGW.js";function De(e,h){if(e&1&&(r(0,"li"),s(1),n()),e&2){let t=h.$implicit;p(),L(t)}}var se=(()=>{class e{constructor(){this.photos=[],this.inputValue=""}onSubmit(){this.inputValue.length>4&&!this.photos.includes(this.inputValue)&&(this.photos.push(this.inputValue),this.inputValue="")}handleChange(t){this.inputValue=t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=c({type:e,selectors:[["app-photos-adder"]],inputs:{photos:"photos"},standalone:!0,features:[C],decls:8,vars:3,consts:[[2,"display","flex","flex-direction","column","align-items","center"],[2,"display","flex","align-items","center"],[3,"valueChange","placeholder","label","value"],[3,"click"]],template:function(i,o){i&1&&(r(0,"article",0)(1,"div",1)(2,"app-input",2),f("valueChange",function(u){return o.handleChange(u)}),n(),r(3,"app-button",3),f("click",function(){return o.onSubmit()}),s(4,"Add"),n()(),r(5,"ul"),x(6,De,2,1,"li",null,M),n()()),i&2&&(p(2),l("placeholder","newPhoto.jpg")("label","Photo Url")("value",o.inputValue),p(4),F(o.photos))},dependencies:[X,Q]})}}return e})();var ye=()=>({required:"Name is required"}),be=e=>({name:e}),_e=()=>({required:"Model is required"}),Me=e=>({model:e}),xe=()=>({required:"Description is required"}),Fe=e=>({description:e}),Ee=()=>({required:"Picture is required"}),Te=e=>({ppalPicture:e});function Pe(e,h){e&1&&(r(0,"div",13)(1,"div")(2,"label"),a(3,"input",16),s(4," Is Interior "),n()(),r(5,"div")(6,"label"),a(7,"input",17),s(8," Is Exterior "),n()(),r(9,"div")(10,"label"),a(11,"input",18),s(12," Movement Detection "),n()(),r(13,"div")(14,"label"),a(15,"input",19),s(16," People Detection "),n()()())}var P=(()=>{class e{constructor(t,i){this.fb=t,this.DeviceService=i,this.successMessage="",this.errorMessage="",this.device="camera",this.photos=[],this.form=this.fb.group({name:["",[y.required]],model:["",[y.required]],description:["",[y.required]],ppalPicture:["",[y.required]],isExterior:[!1],isInterior:[!1],movementDetection:[!1],peopleDetection:[!1]})}onDeviceTypeChange(t){let i=t.target;this.device=i.value}handleSubmit(){this.successMessage="",this.errorMessage="",this.form.valid?(this.createDevice(this.device),this.form.reset(),this.photos=[]):this.errorMessage="Form is invalid"}createDevice(t){let{name:i,model:o,description:d,ppalPicture:u,isExterior:le,isInterior:de,movementDetection:ue,peopleDetection:fe}=this.form.value;switch(t){case"camera":let ve={name:i,model:o,description:d,ppalPicture:u,isExterior:le,isInterior:de,photos:this.photos,movementDetection:ue,peopleDetection:fe};this.DeviceService.createCamera(ve).subscribe(m=>{this.successMessage="Camera created successfully"},m=>{this.errorMessage=m.error.message});break;case"window-sensor":let he={description:d,model:o,name:i,photos:this.photos,ppalPicture:u};this.DeviceService.createWindowSensor(he).subscribe(m=>{this.successMessage="Window Sensor created successfully"},m=>{this.errorMessage=m.error.message});break;case"movement-sensor":let Ce={description:d,model:o,name:i,photos:this.photos,ppalPicture:u};this.DeviceService.createMovementSensor(Ce).subscribe(m=>{this.successMessage="Movement Sensor created successfully"},m=>{this.errorMessage=m.error.message});break;case"lamp":let ge={description:d,model:o,name:i,photos:this.photos,ppalPicture:u};this.DeviceService.createLamp(ge).subscribe(m=>{this.successMessage="Lamp created successfully"},m=>{this.errorMessage=m.error.message});break;default:console.log("Unknown device type")}}static{this.\u0275fac=function(i){return new(i||e)(g(J),g(E))}}static{this.\u0275cmp=c({type:e,selectors:[["app-create-device-form"]],standalone:!0,features:[C],decls:25,vars:25,consts:[[2,"display","flex","flex-direction","column","align-items","center",3,"ngSubmit","formGroup"],[2,"margin-bottom","20px"],["for","deviceType"],["id","deviceType","name","device",3,"change"],["value","camera"],["value","window-sensor"],["value","movement-sensor"],["value","lamp"],["name","name","type","text","label","Name","placeholder","Name",3,"form","formField"],["name","model","type","text","label","Model","placeholder","Model",3,"form","formField"],["name","description","type","text","label","Description","placeholder","Description",3,"form","formField"],["name","ppalPicture","type","text","label","Principal Picture","placeholder","Principal Picture",3,"form","formField"],[3,"photos"],[2,"margin-top","20px"],["type","submit","title","Submit",2,"margin-top","20px"],[3,"message"],["type","checkbox","formControlName","isInterior"],["type","checkbox","formControlName","isExterior"],["type","checkbox","formControlName","movementDetection"],["type","checkbox","formControlName","peopleDetection"]],template:function(i,o){i&1&&(r(0,"h2"),s(1,"Create Device"),n(),r(2,"form",0),f("ngSubmit",function(){return o.handleSubmit()}),r(3,"div",1)(4,"label",2),s(5,"Device Type"),n(),r(6,"select",3),f("change",function(u){return o.onDeviceTypeChange(u)}),r(7,"option",4),s(8,"Camera"),n(),r(9,"option",5),s(10,"Window Sensor"),n(),r(11,"option",6),s(12,"Movement Sensor"),n(),r(13,"option",7),s(14,"Lamp"),n()()(),a(15,"app-form-input",8)(16,"app-form-input",9)(17,"app-form-input",10)(18,"app-form-input",11)(19,"hr")(20,"app-photos-adder",12),b(21,Pe,17,0,"div",13),a(22,"app-form-button",14)(23,"app-success-message",15)(24,"app-error-message",15),n()),i&2&&(p(2),l("formGroup",o.form),p(13),l("form",o.form)("formField",S(14,be,D(13,ye))),p(),l("form",o.form)("formField",S(17,Me,D(16,_e))),p(),l("form",o.form)("formField",S(20,Fe,D(19,xe))),p(),l("form",o.form)("formField",S(23,Te,D(22,Ee))),p(2),l("photos",o.photos),p(),_(21,o.device=="camera"?21:-1),p(2),l("message",o.successMessage),p(),l("message",o.errorMessage))},dependencies:[K,U,z,H,B,G,O,W,$,ie,Y,Z,ee,se]})}}return e})();var pe=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=c({type:e,selectors:[["app-device-page"]],decls:1,vars:0,template:function(i,o){i&1&&a(0,"app-create-device-form")},dependencies:[P]})}}return e})();function Ie(e,h){if(e&1&&(r(0,"li")(1,"strong"),s(2,"Device Type:"),n(),s(3),a(4,"br"),n()),e&2){let t=h.$implicit;p(3),R(" ",t.type," ")}}function ke(e,h){if(e&1&&(r(0,"ul"),x(1,Ie,5,1,"li",null,M),n()),e&2){let t=N();p(),F(t.supportedDevices)}}function qe(e,h){e&1&&(r(0,"p"),s(1,"There are'nt supported devices available."),n())}var ae=(()=>{class e{constructor(t){this.DeviceSevice=t,this.supportedDevices=[]}ngOnInit(){this.DeviceSevice.getSupportedDevices().subscribe(t=>this.supportedDevices=t,t=>console.error(t))}handleRefresh(){this.DeviceSevice.getSupportedDevices().subscribe(t=>this.supportedDevices=t,t=>console.error(t))}static{this.\u0275fac=function(i){return new(i||e)(g(E))}}static{this.\u0275cmp=c({type:e,selectors:[["app-supported-devices-list"]],standalone:!0,features:[C],decls:7,vars:1,consts:[[3,"click"]],template:function(i,o){i&1&&(r(0,"article")(1,"h2"),s(2,"Supported devices list"),n(),r(3,"button",0),f("click",function(){return o.handleRefresh()}),s(4," Refresh "),n(),b(5,ke,3,0,"ul")(6,qe,2,0),n()),i&2&&(p(5),_(5,o.supportedDevices.length>0?5:6))}})}}return e})();var ce=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=c({type:e,selectors:[["app-supported-devices"]],decls:1,vars:0,template:function(i,o){i&1&&a(0,"app-supported-devices-list")},dependencies:[ae]})}}return e})();var me=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=c({type:e,selectors:[["app-all-devices"]],decls:1,vars:0,template:function(i,o){i&1&&a(0,"app-registered-devices-list")},dependencies:[T]})}}return e})();var w=(()=>{class e{constructor(t){this.SessionService=t}canActivate(){let{token:t,roles:i}=this.SessionService.getCurrentUser(),o=i.length>0;return!!(t&&o)}static{this.\u0275fac=function(i){return new(i||e)(q(te))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ne=[{path:"",component:pe,canActivate:[oe]},{path:"supported",component:ce,canActivate:[w]},{path:"all",component:me,canActivate:[w]}],ut=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=A({type:e})}static{this.\u0275inj=k({imports:[V,j.forChild(Ne),P,T,re,ne]})}}return e})();export{ut as DevicePageModule};
