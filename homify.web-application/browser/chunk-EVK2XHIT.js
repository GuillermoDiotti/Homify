import{a as ee}from"./chunk-OAWK4FG4.js";import{a as Z}from"./chunk-UNOCFUQS.js";import{a as Y}from"./chunk-LYRIO5X3.js";import"./chunk-QYMZVT5J.js";import"./chunk-BYXBJQAS.js";import{a as Q}from"./chunk-366TOATH.js";import{a as E,b as O}from"./chunk-N3TGZAGV.js";import{c as W,d as X}from"./chunk-SYY7HDF4.js";import{c as G,m as U,o as C,q as z,r as H,s as V,x as J,z as K}from"./chunk-G254O7HO.js";import{$ as L,Ac as $,D as M,Jb as a,Lb as g,Mb as B,Rb as h,Sa as s,Sb as v,Ta as f,Tb as y,_ as S,da as F,hb as k,ja as u,jb as c,ka as T,mb as N,nb as D,ob as q,pb as j,qb as r,rb as o,sb as l,yb as d,zb as I}from"./chunk-NEYM5HGW.js";var te=(()=>{class t extends W{constructor(e){super(X.homifyApi,"admins",e)}create(e){return this.post(e).pipe(M(this.handleError))}deleteAdmin(e){return this.delete(e).pipe(M(this.handleError))}getAllAccounts(e){return this.get("accounts",e).pipe(M(this.handleError))}static{this.\u0275fac=function(n){return new(n||t)(F(G))}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var b=(()=>{class t{constructor(e){this._repository=e}create(e){return this._repository.create(e)}deleteAdmin(e){return this._repository.deleteAdmin(e)}getAllAccounts(e,n,i,p){let m=[];e&&m.push(`limit=${encodeURIComponent(e)}`),n&&m.push(`offset=${encodeURIComponent(n)}`),i&&m.push(`role=${encodeURIComponent(i)}`),p&&m.push(`fullname=${encodeURIComponent(p)}`);let A=m.join("&");return this._repository.getAllAccounts(A)}static{this.\u0275fac=function(n){return new(n||t)(F(te))}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var re=()=>({required:"Name is required"}),ae=t=>({name:t}),se=()=>({required:"Email is required",email:"Invalid email format"}),me=t=>({email:t}),ce=()=>({required:"Password is required",minlength:"Minimum length is 6 characters"}),le=t=>({password:t}),pe=()=>({required:"Last name is required"}),de=t=>({lastName:t}),P=(()=>{class t{constructor(e,n){this.fb=e,this.AdminService=n,this.successMessage="",this.errorMessage="",this.form=this.fb.group({name:["",[C.required]],email:["",[C.required,C.email]],password:["",[C.required]],lastName:["",[C.required]]})}handleSubmit(){if(this.successMessage="",this.errorMessage="",this.form.valid){let{name:e,email:n,password:i,lastName:p}=this.form.value,m={name:e,email:n,password:i,lastName:p};this.AdminService.create(m).subscribe(A=>{this.successMessage="Admin created successfully"},A=>{this.errorMessage=A.error.message})}else this.errorMessage="Form is invalid"}static{this.\u0275fac=function(n){return new(n||t)(f(J),f(b))}}static{this.\u0275cmp=u({type:t,selectors:[["app-create-admin-form"]],standalone:!0,features:[h],decls:10,vars:23,consts:[[3,"ngSubmit","formGroup"],["name","name","type","text","label","Name","placeholder","Enter your name",3,"form","formField"],["name","email","type","text","label","Email","placeholder","Enter your email",3,"form","formField"],["name","password","type","password","label","Password","placeholder","Enter your password",3,"form","formField"],["name","lastName","type","text","label","Last Name","placeholder","Enter your last name",3,"form","formField"],["type","submit","title","Submit"],[3,"message"]],template:function(n,i){n&1&&(r(0,"h2"),a(1,"Create Admin"),o(),r(2,"form",0),d("ngSubmit",function(){return i.handleSubmit()}),l(3,"app-form-input",1)(4,"app-form-input",2)(5,"app-form-input",3)(6,"app-form-input",4)(7,"app-form-button",5)(8,"app-success-message",6)(9,"app-error-message",6),o()),n&2&&(s(2),c("formGroup",i.form),s(),c("form",i.form)("formField",y(12,ae,v(11,re))),s(),c("form",i.form)("formField",y(15,me,v(14,se))),s(),c("form",i.form)("formField",y(18,le,v(17,ce))),s(),c("form",i.form)("formField",y(21,de,v(20,pe))),s(2),c("message",i.successMessage),s(),c("message",i.errorMessage))},dependencies:[K,H,z,V,Y,Q,E,O]})}}return t})();var ne=(()=>{class t{constructor(e){this.AdminService=e,this.adminId="",this.errorMessage="",this.successMessage=""}handleClick(){this.AdminService.deleteAdmin(this.adminId).subscribe(e=>this.successMessage="Admin deleted successfully",e=>this.errorMessage=e.error.message)}static{this.\u0275fac=function(n){return new(n||t)(f(b))}}static{this.\u0275cmp=u({type:t,selectors:[["app-delete-admin-button"]],inputs:{adminId:"adminId"},standalone:!0,features:[h],decls:4,vars:2,consts:[[2,"width","90%",3,"click"],[3,"message"]],template:function(n,i){n&1&&(r(0,"button",0),d("click",function(){return i.handleClick()}),a(1,` Delete
`),o(),l(2,"app-success-message",1)(3,"app-error-message",1)),n&2&&(s(2),c("message",i.successMessage),s(),c("message",i.errorMessage))},dependencies:[E,O],styles:["button[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none;border-radius:5px;padding:5px;font-size:16px;cursor:pointer;transition:background-color .3s,transform .2s}button[_ngcontent-%COMP%]:hover{background-color:#c0392b;transform:scale(1.05)}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed;opacity:.7}"]})}}return t})();function fe(t,x){if(t&1&&l(0,"hr")(1,"app-delete-admin-button",12),t&2){let e=I().$implicit;s(),c("adminId",e.id)}}function ge(t,x){if(t&1&&(r(0,"li")(1,"strong"),a(2,"ID:"),o(),a(3),l(4,"br"),r(5,"strong"),a(6,"Name:"),o(),a(7),l(8,"br"),r(9,"strong"),a(10,"Lastname:"),o(),a(11),l(12,"br"),r(13,"strong"),a(14,"Fullname:"),o(),a(15),l(16,"br"),r(17,"strong"),a(18,"Role:"),o(),a(19),l(20,"br"),r(21,"strong"),a(22,"Created at:"),o(),a(23),l(24,"br"),k(25,fe,2,1),o()),t&2){let e=x.$implicit,n=I(2);s(3),g(" ",e.id," "),s(4),g(" ",e.name," "),s(4),g(" ",e.lastName," "),s(4),g(" ",e.fullName," "),s(4),g(" ",e.role," "),s(4),g(" ",e.createdAt," "),s(2),N(25,e.role.includes("ADMINISTRATOR")&&n.userId!=e.id?25:-1)}}function he(t,x){if(t&1&&(r(0,"ul"),q(1,ge,26,7,"li",null,D),o()),t&2){let e=I();s(),j(e.accounts)}}function Ce(t,x){t&1&&(r(0,"p"),a(1,"No accounts available to show."),o())}var w=(()=>{class t{constructor(e){this.AdminService=e,this.accounts=[],this.filterByRole="",this.filterByFullName="",this.userId="",this.limit=10,this.offset=0}updateLimit(e){this.limit=e}updateOffset(e){this.offset=e}ngOnInit(){this.userId=localStorage.getItem("userId")??"",this.AdminService.getAllAccounts().subscribe(e=>{this.accounts=e},e=>{console.error("Error creating admin",e)})}onRoleChange(e){let n=e.target;this.filterByRole=n.value}onFullNameChange(e){this.filterByFullName=e.target.value}handleRefresh(){this.AdminService.getAllAccounts(this.limit.toString(),this.offset.toString(),this.filterByRole,this.filterByFullName).subscribe(e=>{this.accounts=e},e=>{console.error("Error creating admin",e)})}static{this.\u0275fac=function(n){return new(n||t)(f(b))}}static{this.\u0275cmp=u({type:t,selectors:[["app-accounts-list"]],standalone:!0,features:[h],decls:28,vars:5,consts:[[1,"filters"],["for","accRole"],["id","accRole","name","role",3,"change"],["value",""],["value","administrator"],["value","companyowner"],["value","homeowner"],[2,"margin","5px 0","display","flex","align-items","center"],["for","accFullName"],["id","accFullName","type","text",3,"change"],[3,"limitChange","offsetChange","limit","offset"],[3,"click"],[3,"adminId"]],template:function(n,i){n&1&&(r(0,"article")(1,"h2"),a(2,"Accounts list"),o(),r(3,"div",0)(4,"div")(5,"label",1),a(6,"Role"),o(),r(7,"select",2),d("change",function(m){return i.onRoleChange(m)}),r(8,"option",3),a(9,"Any"),o(),r(10,"option",4),a(11,"Administrator"),o(),r(12,"option",5),a(13,"Company Owner"),o(),r(14,"option",6),a(15,"Home Owner"),o()()(),r(16,"div",7)(17,"label",8),a(18,"Fullname"),o(),r(19,"input",9),d("change",function(m){return i.onFullNameChange(m)}),o()(),r(20,"div")(21,"app-pagination",10),d("limitChange",function(m){return i.updateLimit(m)})("offsetChange",function(m){return i.updateOffset(m)}),o(),r(22,"p"),a(23),o()()(),r(24,"button",11),d("click",function(){return i.handleRefresh()}),a(25,"Refresh"),o(),k(26,he,3,0,"ul")(27,Ce,2,0),o()),n&2&&(s(21),c("limit",i.limit)("offset",i.offset),s(2),B("Current Limit: ",i.limit,", Current Offset: ",i.offset,""),s(3),N(26,i.accounts.length>0?26:27))},dependencies:[ne,Z],styles:["article[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 2px 10px #0000001a}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:15px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:5px;padding:10px 15px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}ul[_ngcontent-%COMP%]{list-style-type:none;overflow-y:auto;margin-top:15px;border:1px solid #ddd;border-radius:5px;background-color:#fff}li[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}li[_ngcontent-%COMP%]:last-child{border-bottom:none}strong[_ngcontent-%COMP%]{color:#555}p[_ngcontent-%COMP%]{color:#888;font-style:italic;text-align:center}button[_ngcontent-%COMP%]{background-color:#fdfdfd;color:#000;border:1px solid gray;border-radius:5px;padding:5px;font-size:16px;cursor:pointer;transition:background-color .3s,transform .2s}button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed;opacity:.7}"]})}}return t})();var ie=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-admin-page"]],decls:3,vars:0,consts:[[1,"container"],[1,"form"],[1,"list"]],template:function(n,i){n&1&&(r(0,"section",0),l(1,"app-create-admin-form",1)(2,"app-accounts-list",2),o())},dependencies:[P,w],styles:[".container[_ngcontent-%COMP%]{max-height:100dvh;overflow-y:auto;display:flex;flex-direction:column;align-items:center;gap:2rem}.list[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]{width:80%}.list[_ngcontent-%COMP%]{margin:20px 0}"]})}}return t})();var be=[{path:"",component:ie,canActivate:[ee]}],Ve=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=T({type:t})}static{this.\u0275inj=L({imports:[$,U.forChild(be),P,w]})}}return t})();export{Ve as AdministratorModule};
