import{a as ne}from"./chunk-7KLWIFCO.js";import{a as ie}from"./chunk-OAWK4FG4.js";import{a as re}from"./chunk-BXKUOTM4.js";import{a as oe}from"./chunk-UNOCFUQS.js";import{a as te}from"./chunk-LYRIO5X3.js";import"./chunk-QYMZVT5J.js";import"./chunk-BYXBJQAS.js";import{a as Y}from"./chunk-366TOATH.js";import{a as O,b as L}from"./chunk-N3TGZAGV.js";import{a as X,c as Z,d as ee}from"./chunk-SYY7HDF4.js";import{c as $,m as z,o as V,q as H,r as J,s as K,x as Q,z as W}from"./chunk-G254O7HO.js";import{$ as k,Ac as G,Cb as v,D as b,Jb as a,Kb as U,Lb as _,Mb as B,Pa as j,Rb as h,Sa as s,Sb as I,Ta as f,Tb as w,_ as F,da as M,hb as q,ja as u,jb as c,ka as N,mb as A,nb as S,ob as x,pb as E,qb as r,rb as n,sb as p,yb as d,zb as D}from"./chunk-NEYM5HGW.js";var ae=(()=>{class t extends Z{constructor(e){super(ee.homifyApi,"companies",e)}create(e){return this.post(e).pipe(b(this.handleError))}getAllCompanies(e){return this.get("",e).pipe(b(this.handleError))}addValidator(e){return this.putById("validators",e).pipe(b(this.handleError))}static{this.\u0275fac=function(o){return new(o||t)(M($))}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var C=(()=>{class t{constructor(e){this._repository=e}create(e){return this._repository.create(e)}getAllCompanies(e,o,i,l){let m=[];e&&m.push(`limit=${encodeURIComponent(e)}`),o&&m.push(`offset=${encodeURIComponent(o)}`),l&&m.push(`company=${encodeURIComponent(l)}`),i&&m.push(`ownerFullName=${encodeURIComponent(i)}`);let le=m.join("&");return this._repository.getAllCompanies(le)}addValidator(e){return this._repository.addValidator(e)}static{this.\u0275fac=function(o){return new(o||t)(M(ae))}}static{this.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function de(t,y){if(t&1&&(r(0,"li"),p(1,"img",7),r(2,"strong"),a(3,"Company Name:"),n(),a(4),p(5,"br"),r(6,"strong"),a(7,"Owner Name:"),n(),a(8),p(9,"br"),r(10,"strong"),a(11,"Owner Mail:"),n(),a(12),p(13,"br"),r(14,"strong"),a(15,"Rut:"),n(),a(16),p(17,"br"),n()),t&2){let e=y.$implicit;s(),v("src",e.logo,j),v("alt",e.companyName),s(3),_(" ",e.companyName," "),s(4),_(" ",e.ownerName," "),s(4),_(" ",e.ownerMail," "),s(4),_(" ",e.rut," ")}}function ue(t,y){if(t&1&&(r(0,"ul"),x(1,de,18,6,"li",null,S),n()),t&2){let e=D();s(),E(e.companies)}}function fe(t,y){t&1&&(r(0,"p"),a(1,"There are'nt companies available."),n())}var se=(()=>{class t{constructor(e){this.CompanyService=e,this.companies=[],this.limit=10,this.offset=0,this.ownerFullnameFilter="",this.companyFilter=""}updateLimit(e){this.limit=e}updateOffset(e){this.offset=e}onCompanyChange(e){this.companyFilter=e.target.value}onOwnerFullnameChange(e){this.ownerFullnameFilter=e.target.value}ngOnInit(){this.CompanyService.getAllCompanies(this.limit.toString(),this.offset.toString(),this.ownerFullnameFilter,this.companyFilter).subscribe(e=>{this.companies=e},e=>{console.error("Error listing companies",e)})}handleRefresh(){this.CompanyService.getAllCompanies(this.limit.toString(),this.offset.toString(),this.ownerFullnameFilter,this.companyFilter).subscribe(e=>{this.companies=e},e=>{console.error("Error listing companies",e)})}static{this.\u0275fac=function(o){return new(o||t)(f(C))}}static{this.\u0275cmp=u({type:t,selectors:[["app-companies-list"]],standalone:!0,features:[h],decls:20,vars:5,consts:[[2,"margin","5px 0","display","flex","align-items","center"],["for","accOwnerFullName"],["id","accOwnerFullName","type","text",3,"change"],["for","accCompany"],["id","accCompany","type","text",3,"change"],[3,"limitChange","offsetChange","limit","offset"],[3,"click"],[2,"width","100px","height","100px","max-width","100px","max-height","100px","border-radius","100%",3,"src","alt"]],template:function(o,i){o&1&&(r(0,"article")(1,"h2"),a(2,"Listing of Companies"),n(),r(3,"div")(4,"div",0)(5,"label",1),a(6,"Owner Fullname"),n(),r(7,"input",2),d("change",function(m){return i.onOwnerFullnameChange(m)}),n()(),r(8,"div",0)(9,"label",3),a(10,"Company"),n(),r(11,"input",4),d("change",function(m){return i.onCompanyChange(m)}),n()(),r(12,"div")(13,"app-pagination",5),d("limitChange",function(m){return i.updateLimit(m)})("offsetChange",function(m){return i.updateOffset(m)}),n(),r(14,"p"),a(15),n()()(),r(16,"button",6),d("click",function(){return i.handleRefresh()}),a(17," Refresh "),n(),q(18,ue,3,0,"ul")(19,fe,2,0),n()),o&2&&(s(13),c("limit",i.limit)("offset",i.offset),s(2),B("Current Limit: ",i.limit,", Current Offset: ",i.offset,""),s(3),A(18,i.companies.length>0?18:19))},dependencies:[oe],styles:["article[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 2px 10px #0000001a}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:15px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:5px;padding:10px 15px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}ul[_ngcontent-%COMP%]{list-style-type:none;overflow-y:auto;margin-top:15px;border:1px solid #ddd;border-radius:5px;background-color:#fff}li[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #eee}li[_ngcontent-%COMP%]:last-child{border-bottom:none}strong[_ngcontent-%COMP%]{color:#555}p[_ngcontent-%COMP%]{color:#888;font-style:italic;text-align:center}button[_ngcontent-%COMP%]{background-color:#fdfdfd;color:#000;border:1px solid gray;border-radius:5px;padding:5px;font-size:16px;cursor:pointer;transition:background-color .3s,transform .2s}button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed;opacity:.7}"]})}}return t})();var me=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-list-company-page"]],decls:1,vars:0,template:function(o,i){o&1&&p(0,"app-companies-list")},dependencies:[se]})}}return t})();var he=()=>({required:"Name is required"}),Ce=t=>({Name:t}),ye=()=>({required:"Logo is required"}),ve=t=>({LogoUrl:t}),_e=()=>({required:"Rut is required"}),be=t=>({Rut:t}),P=(()=>{class t{constructor(e,o){this.fb=e,this.CompanyService=o,this.successMessage="",this.errorMessage="",this.form=this.fb.group({Name:["",[V.required]],LogoUrl:["",[V.required]],Rut:["",[V.required]]})}handleSubmit(){if(this.successMessage="",this.errorMessage="",this.form.valid){let{Name:e,LogoUrl:o,Rut:i}=this.form.value,l={Name:e,LogoUrl:o,Rut:i};this.CompanyService.create(l).subscribe(m=>{this.successMessage="Company created successfully"},m=>{this.errorMessage=m.error.message})}else this.errorMessage="Form is invalid"}static{this.\u0275fac=function(o){return new(o||t)(f(Q),f(C))}}static{this.\u0275cmp=u({type:t,selectors:[["app-create-company-form"]],standalone:!0,features:[h],decls:9,vars:18,consts:[[3,"ngSubmit","formGroup"],["name","Name","type","text","label","Name","placeholder","Enter the company name",3,"form","formField"],["name","LogoUrl","type","text","label","Logo","placeholder","Enter the company logo's url",3,"form","formField"],["name","Rut","type","text","label","Rut","placeholder","Enter the rut of the company",3,"form","formField"],["type","submit","title","Submit"],[3,"message"]],template:function(o,i){o&1&&(r(0,"h2"),a(1,"Create Company"),n(),r(2,"form",0),d("ngSubmit",function(){return i.handleSubmit()}),p(3,"app-form-input",1)(4,"app-form-input",2)(5,"app-form-input",3)(6,"app-form-button",4)(7,"app-success-message",5)(8,"app-error-message",5),n()),o&2&&(s(2),c("formGroup",i.form),s(),c("form",i.form)("formField",w(10,Ce,I(9,he))),s(),c("form",i.form)("formField",w(13,ve,I(12,ye))),s(),c("form",i.form)("formField",w(16,be,I(15,_e))),s(2),c("message",i.successMessage),s(),c("message",i.errorMessage))},dependencies:[W,J,H,K,te,Y,O,L]})}}return t})();function Me(t,y){if(t&1&&(r(0,"option",2),a(1),n()),t&2){let e=y.$implicit;v("value",e),s(),U(e)}}var T=(()=>{class t{constructor(e,o){this.ImportService=e,this.CompanyService=o,this.successMessage="",this.errorMessage="",this.validators=[],this.selectedValidator=""}ngOnInit(){this.successMessage="",this.errorMessage="",this.ImportService.getValidators().subscribe(e=>{this.validators=e,this.selectedValidator=e[0]},e=>this.errorMessage=e.error.message)}handleRefreshValidators(){this.successMessage="",this.errorMessage="",this.ImportService.getValidators().subscribe(e=>{this.validators=e,this.selectedValidator=e[0]},e=>this.errorMessage=e.error.message)}handleSubmit(){this.successMessage="",this.errorMessage="";let e={model:this.selectedValidator};this.CompanyService.addValidator(e).subscribe(o=>{this.successMessage="Validator added successfully"},o=>{this.errorMessage=o.error.message})}onValidatorChange(e){let o=e.target;this.selectedValidator=o.value}static{this.\u0275fac=function(o){return new(o||t)(f(ne),f(C))}}static{this.\u0275cmp=u({type:t,selectors:[["app-validator-form"]],standalone:!0,features:[h],decls:14,vars:2,consts:[["for","validator"],["id","validator","name","validator",3,"change"],[3,"value"],[3,"click"],[3,"message"]],template:function(o,i){o&1&&(r(0,"h2"),a(1,"Import validations"),n(),r(2,"div")(3,"label",0),a(4,"Validator"),n(),r(5,"select",1),d("change",function(m){return i.onValidatorChange(m)}),x(6,Me,2,2,"option",2,S),n(),r(8,"app-button",3),d("click",function(){return i.handleRefreshValidators()}),a(9,"Refresh validators"),n(),r(10,"app-button",3),d("click",function(){return i.handleSubmit()}),a(11,"Submit"),n()(),p(12,"app-success-message",4)(13,"app-error-message",4)),o&2&&(s(6),E(i.validators),s(6),c("message",i.successMessage),s(),c("message",i.errorMessage))},dependencies:[O,L,X]})}}return t})();var pe=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-create-company-page"]],decls:2,vars:0,template:function(o,i){o&1&&p(0,"app-create-company-form")(1,"app-validator-form")},dependencies:[P,T]})}}return t})();var xe=[{path:"create",component:pe,canActivate:[re]},{path:"list",component:me,canActivate:[ie]}],tt=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=k({imports:[G,z.forChild(xe),P,T]})}}return t})();export{tt as CompanyPageModule};
