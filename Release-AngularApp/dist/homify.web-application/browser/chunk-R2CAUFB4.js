import{a as A,b as $,c as W,d as G,e as q}from"./chunk-EURHNXKW.js";import{a as Z}from"./chunk-UNOCFUQS.js";import{a as H,b as V,c as U,d as Y}from"./chunk-SYY7HDF4.js";import{c as O}from"./chunk-G254O7HO.js";import{$ as B,Cb as T,D as s,Jb as d,Lb as _,Mb as N,Pa as L,Rb as y,Sa as m,Ta as f,_ as w,da as k,hb as g,ja as v,jb as j,ka as S,mb as h,nb as D,ob as C,pb as I,qb as a,ra as z,rb as o,sa as F,sb as x,vb as E,ya as P,yb as l,zb as b}from"./chunk-NEYM5HGW.js";function et(e,u){e&1&&(a(0,"li"),x(1,"img",1),o())}function ot(e,u){if(e&1&&C(0,et,2,0,"li",null,D),e&2){let t=b();I(t.photos)}}function at(e,u){e&1&&(a(0,"p"),d(1,"Device has no photos to show."),o())}var J=(()=>{class e{constructor(t,n){this.dialogRef=t,this.data=n,this.photos=this.data.device?.photos??[]}static{this.\u0275fac=function(n){return new(n||e)(f(W),f(G))}}static{this.\u0275cmp=v({type:e,selectors:[["app-device-photos-list"]],standalone:!0,features:[y],decls:3,vars:1,consts:[[2,"display","flex","flex-direction","column","justify-content","center","align-items","center","width","400px","height","400px"],["src","ph","alt","ph",2,"width","200px","height","200px","max-width","200px","max-height","200px"]],template:function(n,i){n&1&&(a(0,"ul",0),g(1,ot,2,0)(2,at,2,0),o()),n&2&&(m(),h(1,i.photos.length>0?1:2))}})}}return e})();var K=(()=>{class e extends U{constructor(t){super(Y.homifyApi,"devices",t)}createCamera(t){return this.post(t,"cameras").pipe(s(this.handleError))}createSensor(t){return this.post(t,"sensors").pipe(s(this.handleError))}createMovementSensor(t){return this.post(t,"movement-sensors").pipe(s(this.handleError))}createWindowSensor(t){return this.post(t,"window-sensors").pipe(s(this.handleError))}createLamp(t){return this.post(t,"lamps").pipe(s(this.handleError))}getRegisteredDevices(t){return this.get("",t).pipe(s(this.handleError))}getSupportedDevices(){return this.get("supported").pipe(s(this.handleError))}static{this.\u0275fac=function(n){return new(n||e)(k(O))}}static{this.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Q=(()=>{class e{constructor(t){this._repository=t}createCamera(t){return this._repository.createCamera(t)}createMovementSensor(t){return this._repository.createMovementSensor(t)}createWindowSensor(t){return this._repository.createWindowSensor(t)}createLamp(t){return this._repository.createLamp(t)}getRegisteredDevices(t,n,i,r,c,R){let p=[];t&&p.push(`limit=${encodeURIComponent(t)}`),n&&p.push(`offset=${encodeURIComponent(n)}`),R&&p.push(`type=${encodeURIComponent(R)}`),c&&p.push(`company=${encodeURIComponent(c)}`),r&&p.push(`model=${encodeURIComponent(r)}`),i&&p.push(`deviceName=${encodeURIComponent(i)}`);let X=p.join("&");return this._repository.getRegisteredDevices(X)}getSupportedDevices(){return this._repository.getSupportedDevices()}static{this.\u0275fac=function(n){return new(n||e)(k(K))}}static{this.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dt(e,u){if(e&1){let t=E();a(0,"app-button",18),l("click",function(){z(t);let i=b().$implicit,r=b(2);return F(r.onDeviceClick(i.id))}),d(1," Add "),o()}e&2&&j("type","button")}function rt(e,u){if(e&1){let t=E();a(0,"li")(1,"div",13),x(2,"img",14),o(),a(3,"div",15)(4,"div",16)(5,"strong"),d(6,"Name:"),o(),d(7),o(),a(8,"div",16)(9,"strong"),d(10,"Company:"),o(),d(11),o(),a(12,"div",16)(13,"strong"),d(14,"Model:"),o(),d(15),o(),a(16,"div",16)(17,"strong"),d(18,"Type:"),o(),d(19),o(),a(20,"app-button",12),l("click",function(){let i=z(t).$implicit,r=b(2);return F(r.handleViewPhotos(i))}),d(21,"View photos "),o(),g(22,dt,2,1,"app-button",17),o()()}if(e&2){let t=u.$implicit,n=b(2);m(2),T("src",t.photo,L),T("alt",t.name),m(5),_(" ",t.name,""),m(4),_(" ",t.companyName," "),m(4),_(" ",t.model,""),m(4),_(" ",t.type,""),m(3),h(22,n.displayButtons?22:-1)}}function ct(e,u){if(e&1&&(a(0,"ul"),C(1,rt,23,7,"li",null,D),o()),e&2){let t=b();m(),I(t.registeredDevices)}}function mt(e,u){e&1&&(a(0,"p"),d(1,"There are'nt registered devices available."),o())}var Dt=(()=>{class e{constructor(t,n){this.DeviceSevice=t,this.dialog=n,this.registeredDevices=[],this.deviceEmitter=new P,this.deviceSelected="",this.displayButtons=!1,this.filterByDeviceName="",this.filterByModel="",this.filterByCompany="",this.filterByDeviceType="",this.limit=10,this.offset=0}updateLimit(t){this.limit=t}updateOffset(t){this.offset=t}handleViewPhotos(t){this.dialog.open(J,{data:{device:t}})}ngOnInit(){this.DeviceSevice.getRegisteredDevices(this.limit,this.offset,this.filterByDeviceName,this.filterByModel,this.filterByCompany,this.filterByDeviceType).subscribe(t=>this.registeredDevices=t,t=>console.error(t))}handleRefresh(){this.DeviceSevice.getRegisteredDevices(this.limit,this.offset,this.filterByDeviceName,this.filterByModel,this.filterByCompany,this.filterByDeviceType).subscribe(t=>this.registeredDevices=t,t=>console.error(t))}handleRefreshWithoutFilters(){this.DeviceSevice.getRegisteredDevices().subscribe(t=>this.registeredDevices=t,t=>console.error(t))}onDeviceClick(t){this.deviceSelected=t,this.deviceEmitter.emit(t)}onNameChange(t){this.filterByDeviceName=t.target.value}onModelChange(t){this.filterByModel=t.target.value}onCompanyChange(t){this.filterByCompany=t.target.value}onTypeChange(t){this.filterByDeviceType=t.target.value}static{this.\u0275fac=function(n){return new(n||e)(f(Q),f(q))}}static{this.\u0275cmp=v({type:e,selectors:[["app-registered-devices-list"]],inputs:{displayButtons:"displayButtons"},outputs:{deviceEmitter:"deviceEmitter"},standalone:!0,features:[y],decls:31,vars:5,consts:[[1,"filters"],[2,"margin","5px 0","display","flex","align-items","center"],["for","deviceNameFilter"],["id","deviceNameFilter","type","text",3,"change"],["for","deviceModelFilter"],["id","deviceModelFilter","type","text",3,"change"],["for","deviceCompanyFilter"],["id","deviceCompanyFilter","type","text",3,"change"],["for","deviceTypeFilter"],["id","deviceTypeFilter","type","text",3,"change"],[3,"limitChange","offsetChange","limit","offset"],[2,"display","flex","gap","10px","margin","10px 0"],[3,"click"],[1,"photo-container",2,"display","flex","align-items","center","max-height","200px","max-width","200px"],[3,"src","alt"],[1,"info-container"],[1,"col"],[3,"type"],[3,"click","type"]],template:function(n,i){n&1&&(a(0,"article")(1,"h2"),d(2,"Registered devices list"),o(),a(3,"div",0)(4,"div",1)(5,"label",2),d(6,"Name"),o(),a(7,"app-input",3),l("change",function(c){return i.onNameChange(c)}),o()(),a(8,"div",1)(9,"label",4),d(10,"Model"),o(),a(11,"app-input",5),l("change",function(c){return i.onModelChange(c)}),o()(),a(12,"div",1)(13,"label",6),d(14,"Company"),o(),a(15,"app-input",7),l("change",function(c){return i.onCompanyChange(c)}),o()(),a(16,"div",1)(17,"label",8),d(18,"Type"),o(),a(19,"app-input",9),l("change",function(c){return i.onTypeChange(c)}),o()(),a(20,"div")(21,"app-pagination",10),l("limitChange",function(c){return i.updateLimit(c)})("offsetChange",function(c){return i.updateOffset(c)}),o(),a(22,"p"),d(23),o()()(),a(24,"div",11)(25,"app-button",12),l("click",function(){return i.handleRefresh()}),d(26,"Refresh"),o(),a(27,"app-button",12),l("click",function(){return i.handleRefreshWithoutFilters()}),d(28,"Refresh with no filters"),o()(),g(29,ct,3,0,"ul")(30,mt,2,0),o()),n&2&&(m(21),j("limit",i.limit)("offset",i.offset),m(2),N("Current Limit: ",i.limit,", Current Offset: ",i.offset,""),m(6),h(29,i.registeredDevices.length>0?29:30))},dependencies:[H,Z,V],styles:["ul[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:column;align-items:center;gap:3rem}li[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border:2px solid #224fca;border-radius:20px;padding:10px;gap:3rem}.photo-container[_ngcontent-%COMP%]{width:250px;max-width:250px}img[_ngcontent-%COMP%]{width:200px;height:200px;max-width:200px;max-height:200px}.info-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:2rem}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}"]})}}return e})();var Ot=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=B({imports:[A,$,A]})}}return e})();export{Q as a,Dt as b,Ot as c};
