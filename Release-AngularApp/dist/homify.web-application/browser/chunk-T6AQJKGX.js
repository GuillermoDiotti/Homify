import{a as I,b as se,c as K,d as we}from"./chunk-YC672KM6.js";import{a as W}from"./chunk-FBMKTQUY.js";import{b as Oe,c as Le}from"./chunk-R2CAUFB4.js";import{c as oe,d as ne,e as re,f as Ee}from"./chunk-EURHNXKW.js";import"./chunk-6IF77IJH.js";import"./chunk-GOV7BL6D.js";import"./chunk-UNOCFUQS.js";import{a as J}from"./chunk-LYRIO5X3.js";import"./chunk-QYMZVT5J.js";import"./chunk-BYXBJQAS.js";import{a as z}from"./chunk-366TOATH.js";import{a as _,b as C}from"./chunk-N3TGZAGV.js";import{a as g,b as De,c as Fe,d as Te}from"./chunk-SYY7HDF4.js";import{c as be,m as Me,o as R,p as Se,q as N,r as j,s as P,t as xe,u as Ie,v as ye,w as He,x as q,z as k}from"./chunk-G254O7HO.js";import{$ as he,Ac as ie,Cb as G,D as A,Db as _e,Jb as m,Kb as te,Lb as x,Pa as ee,Rb as v,Sa as r,Sb as L,Ta as d,Tb as w,_ as Y,da as Z,hb as b,ja as l,jb as a,ka as ge,mb as S,nb as T,ob as E,pb as O,qb as s,ra as D,rb as o,sa as F,sb as c,vb as B,xc as Ce,ya as $,yb as p,zb as h}from"./chunk-NEYM5HGW.js";var Ye=()=>({required:"Street is required"}),Ze=t=>({name:t}),et=()=>({required:"Number is required",number:"Invalid number format"}),tt=t=>({number:t}),it=()=>({required:"Latitude is required"}),ot=t=>({latitude:t}),nt=()=>({required:"Longitud is required"}),rt=t=>({longitud:t}),st=()=>({required:"Alias is required"}),mt=t=>({alias:t}),at=()=>({required:"Max members is required"}),ct=t=>({maxMembers:t}),me=(()=>{class t{constructor(e,i){this.fb=e,this.HomeService=i,this.successMessage="",this.errorMessage="",this.form=this.fb.group({street:["",[R.required]],number:["",[R.required]],latitude:["",[R.required]],longitud:["",[R.required]],alias:["",[R.required]],maxMembers:["",[R.required,R.pattern("^[0-9]*$")]]})}handleSubmit(){if(this.successMessage="",this.errorMessage="",this.form.valid){let{street:e,number:i,latitude:n,longitud:u,alias:y,maxMembers:X}=this.form.value,Xe={street:e,number:i,latitude:n,longitud:u,alias:y,maxMembers:X};this.HomeService.create(Xe).subscribe(ve=>{this.successMessage="Home created successfully"},ve=>{this.errorMessage=ve.error.message})}else this.errorMessage="Form is invalid"}static{this.\u0275fac=function(i){return new(i||t)(d(q),d(I))}}static{this.\u0275cmp=l({type:t,selectors:[["app-create-home-form"]],standalone:!0,features:[v],decls:12,vars:33,consts:[[3,"ngSubmit","formGroup"],["name","street","type","text","label","Street","placeholder","Street",3,"form","formField"],["name","number","type","text","label","Number","placeholder","Number",3,"form","formField"],["name","latitude","type","text","label","Latitude","placeholder","Latitude",3,"form","formField"],["name","longitud","type","text","label","Longitud","placeholder","Longitud",3,"form","formField"],["name","alias","type","text","label","Alias","placeholder","Alias",3,"form","formField"],["name","maxMembers","type","number","label","Max members","placeholder","Max members",3,"form","formField"],["type","submit","title","Submit"],[3,"message"]],template:function(i,n){i&1&&(s(0,"h2"),m(1,"Create Home"),o(),s(2,"form",0),p("ngSubmit",function(){return n.handleSubmit()}),c(3,"app-form-input",1)(4,"app-form-input",2)(5,"app-form-input",3)(6,"app-form-input",4)(7,"app-form-input",5)(8,"app-form-input",6)(9,"app-form-button",7)(10,"app-success-message",8)(11,"app-error-message",8),o()),i&2&&(r(2),a("formGroup",n.form),r(),a("form",n.form)("formField",w(16,Ze,L(15,Ye))),r(),a("form",n.form)("formField",w(19,tt,L(18,et))),r(),a("form",n.form)("formField",w(22,ot,L(21,it))),r(),a("form",n.form)("formField",w(25,rt,L(24,nt))),r(),a("form",n.form)("formField",w(28,mt,L(27,st))),r(),a("form",n.form)("formField",w(31,ct,L(30,at))),r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[k,j,N,P,J,z,_,C]})}}return t})();var Be=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=l({type:t,selectors:[["app-create-home"]],decls:1,vars:0,template:function(i,n){i&1&&c(0,"app-create-home-form")},dependencies:[me]})}}return t})();var lt=()=>({required:"Email is required"}),dt=t=>({Name:t}),ae=(()=>{class t{onHomeSelected(e){this.selectedHomeId=e}constructor(e,i){this.fb=e,this.HomeService=i,this.successMessage="",this.errorMessage="",this.selectedHomeId=null,this.form=this.fb.group({email:["",[R.required]]})}handleSubmit(){if(this.successMessage="",this.errorMessage="",this.form.valid){let{email:e}=this.form.value,i={email:e};this.HomeService.UpdateMembers(this.selectedHomeId??"",i).subscribe(n=>{this.successMessage="Member added successfully"},n=>{this.errorMessage=n.error.message})}else this.errorMessage="Form is invalid"}static{this.\u0275fac=function(i){return new(i||t)(d(q),d(I))}}static{this.\u0275cmp=l({type:t,selectors:[["app-add-home-member-form"]],inputs:{selectedHomeId:"selectedHomeId"},standalone:!0,features:[v],decls:7,vars:8,consts:[[3,"ngSubmit","formGroup"],["name","email","type","text","label","Email","placeholder","Email",3,"form","formField"],["type","submit","title","Submit"],[3,"message"]],template:function(i,n){i&1&&(s(0,"h2"),m(1,"Add member"),o(),s(2,"form",0),p("ngSubmit",function(){return n.handleSubmit()}),c(3,"app-form-input",1)(4,"app-form-button",2)(5,"app-success-message",3)(6,"app-error-message",3),o()),i&2&&(r(2),a("formGroup",n.form),r(),a("form",n.form)("formField",w(6,dt,L(5,lt))),r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[k,j,N,P,J,z,_,C]})}}return t})();function ft(t,f){if(t&1&&(s(0,"span"),m(1),o()),t&2){let e=f.$implicit;r(),te(e)}}function vt(t,f){if(t&1){let e=B();s(0,"li",2)(1,"picture"),c(2,"img",3),o(),c(3,"br"),s(4,"strong"),m(5,"Member Name:"),o(),m(6),c(7,"br"),s(8,"strong"),m(9,"Member Email:"),o(),m(10),c(11,"br"),s(12,"div",4)(13,"strong"),m(14,"Member Permissions:"),o(),s(15,"div",5),E(16,ft,2,1,"span",null,T),o()(),c(18,"br"),s(19,"app-button",6),p("clicked",function(){let n=D(e).$implicit,u=h(2);return F(u.onClick(n.id))}),m(20,"Select"),o()()}if(t&2){let e=f.$implicit;r(2),G("src",e.photo,ee),r(4),x(" ",e.fullname," "),r(4),x(" ",e.email," "),r(6),O(e.permissions)}}function ht(t,f){if(t&1&&(s(0,"ul",1),E(1,vt,21,3,"li",2,T),o()),t&2){let e=h();r(),O(e.members)}}function gt(t,f){t&1&&(s(0,"p"),m(1,"There aren't members available."),o())}var Q=(()=>{class t{constructor(e){this.HomeService=e,this.members=[],this.memberSelected=new $,this.selectedMemberId="",this.selectedHomeId=""}ngOnInit(){this.HomeService.GetMembers(this.selectedHomeId).subscribe(e=>{this.members=e},e=>{console.error("Error listing members",e)})}handleRefresh(){this.HomeService.GetMembers(this.selectedHomeId).subscribe(e=>{this.members=e},e=>{console.error("Error listing homes",e)})}onClick(e){this.selectedMemberId=e,this.memberSelected.emit(this.selectedMemberId)}static{this.\u0275fac=function(i){return new(i||t)(d(I))}}static{this.\u0275cmp=l({type:t,selectors:[["app-home-member-list"]],inputs:{selectedMemberId:"selectedMemberId",selectedHomeId:"selectedHomeId"},outputs:{memberSelected:"memberSelected"},standalone:!0,features:[v],decls:7,vars:1,consts:[[3,"click"],[2,"list-style","none"],[1,"homeowner-card"],["alt","member.name",2,"width","100px","height","100px","max-width","100px","max-height","100px","border-radius","100%",3,"src"],[2,"display","flex","flex-direction","column"],[2,"display","flex","gap","10px"],[3,"clicked"]],template:function(i,n){i&1&&(s(0,"article")(1,"h2"),m(2,"Listing of Members"),o(),s(3,"button",0),p("click",function(){return n.handleRefresh()}),m(4," Refresh "),o(),b(5,ht,3,0,"ul",1)(6,gt,2,0),o()),i&2&&(r(5),S(5,n.members.length>0?5:6))},dependencies:[g]})}}return t})();function Ct(t,f){if(t&1&&c(0,"app-add-home-member-form",1)(1,"app-home-member-list",1),t&2){let e=h();a("selectedHomeId",e.selectedHomeId),r(),a("selectedHomeId",e.selectedHomeId)}}var ke=(()=>{class t{constructor(){this.selectedHomeId=null}onHomeSelected(e){this.selectedHomeId=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=l({type:t,selectors:[["app-add-member"]],inputs:{selectedHomeId:"selectedHomeId"},decls:2,vars:1,consts:[[3,"homeSelected"],[3,"selectedHomeId"]],template:function(i,n){i&1&&(s(0,"app-owner-home-list",0),p("homeSelected",function(y){return n.onHomeSelected(y)}),o(),b(1,Ct,2,2)),i&2&&(r(),S(1,n.selectedHomeId?1:-1))},dependencies:[K,ae,Q]})}}return t})();var ce=(()=>{class t{constructor(e,i){this.fb=e,this.homeService=i,this.successMessage="",this.errorMessage="",this.selectedMemberId=null,this.selectedHomeId=null,this.form=this.fb.group({canAddDevices:[!1],canListDevices:[!1],canRenameDevices:[!1]})}handleSubmit(e){if(e.preventDefault(),this.successMessage="",this.errorMessage="",console.log(this.selectedMemberId),this.form.valid){let{canAddDevices:i,canListDevices:n,canRenameDevices:u}=this.form.value,y={canAddDevices:!!i,canListDevices:!!n,canRenameDevices:!!u};this.homeService.UpdatePermissions(this.selectedHomeId??"",y,this.selectedMemberId??"").subscribe(X=>{this.successMessage="Permissions updated successfully"},X=>{this.errorMessage=X.error.message})}else this.errorMessage="Form is invalid"}static{this.\u0275fac=function(i){return new(i||t)(d(q),d(I))}}static{this.\u0275cmp=l({type:t,selectors:[["app-update-members-permissions-form"]],inputs:{selectedMemberId:"selectedMemberId",selectedHomeId:"selectedHomeId"},standalone:!0,features:[v],decls:28,vars:9,consts:[[3,"submit","formGroup"],["for","CanAddDevices"],["id","CanAddDevices","formControlName","canAddDevices"],[3,"value"],["for","CanListDevices"],["id","CanListDevices","formControlName","canListDevices"],["for","CanRenameDevices"],["id","CanRenameDevices","formControlName","canRenameDevices"],["type","submit"],[3,"message"]],template:function(i,n){i&1&&(s(0,"h2"),m(1,"Add Permissions"),o(),s(2,"form",0),p("submit",function(y){return n.handleSubmit(y)}),s(3,"label",1),m(4,"Add Devices"),o(),s(5,"select",2)(6,"option",3),m(7,"True"),o(),s(8,"option",3),m(9,"False"),o()(),s(10,"label",4),m(11,"List Devices"),o(),s(12,"select",5)(13,"option",3),m(14,"True"),o(),s(15,"option",3),m(16,"False"),o()(),s(17,"label",6),m(18,"Rename Devices"),o(),s(19,"select",7)(20,"option",3),m(21,"True"),o(),s(22,"option",3),m(23,"False"),o()(),s(24,"button",8),m(25,"Submit"),o(),c(26,"app-success-message",9)(27,"app-error-message",9),o()),i&2&&(r(2),a("formGroup",n.form),r(4),a("value",!0),r(2),a("value",!1),r(5),a("value",!0),r(2),a("value",!1),r(5),a("value",!0),r(2),a("value",!1),r(4),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[k,j,ye,He,Ie,Se,N,P,xe,_,C]})}}return t})();var pe=(()=>{class t{constructor(e){this.HomeService=e,this.selectedMemberId="",this.selectedHomeId="",this.errorMessage="",this.successMessage=""}onClick(){this.errorMessage="",this.successMessage="",console.log(this.selectedMemberId);let e={homeUserId:this.selectedMemberId};this.HomeService.makeUserNotificable(this.selectedHomeId,e).subscribe(i=>this.successMessage="Member is now notificable",i=>this.errorMessage=i.error.message)}static{this.\u0275fac=function(i){return new(i||t)(d(I))}}static{this.\u0275cmp=l({type:t,selectors:[["app-make-user-notificable-form"]],inputs:{selectedMemberId:"selectedMemberId",selectedHomeId:"selectedHomeId"},standalone:!0,features:[v],decls:5,vars:2,consts:[[3,"click"],[3,"message"]],template:function(i,n){i&1&&(s(0,"article")(1,"app-button",0),p("click",function(){return n.onClick()}),m(2," Make user notificable "),o(),c(3,"app-success-message",1)(4,"app-error-message",1),o()),i&2&&(r(3),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[g,_,C]})}}return t})();function St(t,f){if(t&1&&c(0,"app-update-members-permissions-form",2)(1,"app-make-user-notificable-form",2),t&2){let e=h(2);a("selectedHomeId",e.selectedHomeId)("selectedMemberId",e.selectedMemberId),r(),a("selectedHomeId",e.selectedHomeId)("selectedMemberId",e.selectedMemberId)}}function xt(t,f){if(t&1){let e=B();s(0,"app-home-member-list",1),p("memberSelected",function(n){D(e);let u=h();return F(u.onMemberSelected(n))}),o(),b(1,St,2,4)}if(t&2){let e=h();a("selectedHomeId",e.selectedHomeId),r(),S(1,e.selectedMemberId?1:-1)}}var Ae=(()=>{class t{constructor(){this.selectedHomeId=null,this.selectedMemberId=null}onHomeSelected(e){this.selectedHomeId=e}onMemberSelected(e){this.selectedMemberId=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=l({type:t,selectors:[["app-update-members-permissions"]],inputs:{selectedHomeId:"selectedHomeId",selectedMemberId:"selectedMemberId"},decls:2,vars:1,consts:[[3,"homeSelected"],[3,"memberSelected","selectedHomeId"],[3,"selectedHomeId","selectedMemberId"]],template:function(i,n){i&1&&(s(0,"app-owner-home-list",0),p("homeSelected",function(y){return n.onHomeSelected(y)}),o(),b(1,xt,2,2)),i&2&&(r(),S(1,n.selectedHomeId?1:-1))},dependencies:[K,ce,Q,pe]})}}return t})();var Ne=(()=>{class t extends Fe{constructor(e){super(Te.homifyApi,"home-devices",e)}renameDevice(e,i){return this.putById(`${i}/update`,e).pipe(A(this.handleError))}turnOnDevice(e){return this.putById(`${e}/activate`).pipe(A(this.handleError))}turnOffDevice(e){return this.putById(`${e}/deactivate`).pipe(A(this.handleError))}turnOnLamp(e){return this.putById(`${e}/lampOn`).pipe(A(this.handleError))}turnOffLamp(e){return this.putById(`${e}/lampOff`).pipe(A(this.handleError))}turnOnSensor(e){return this.putById(`${e}/windowOpen`).pipe(A(this.handleError))}turnOffSensor(e){return this.putById(`${e}/windowClose`).pipe(A(this.handleError))}static{this.\u0275fac=function(i){return new(i||t)(Z(be))}}static{this.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var H=(()=>{class t{constructor(e){this._repository=e}renameDevice(e,i){return this._repository.renameDevice(e,i)}turnOnDevice(e){return this._repository.turnOnDevice(e)}turnOffDevice(e){return this._repository.turnOffDevice(e)}turnOnLamp(e){return this._repository.turnOnLamp(e)}turnOffLamp(e){return this._repository.turnOffLamp(e)}turnOnSensor(e){return this._repository.turnOnSensor(e)}turnOffSensor(e){return this._repository.turnOffSensor(e)}static{this.\u0275fac=function(i){return new(i||t)(Z(Ne))}}static{this.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var je=(()=>{class t{constructor(e){this.HomeDeviceService=e,this.device=null,this.successMessage="",this.errorMessage=""}handleTurnOnDevice(){this.successMessage="",this.errorMessage="",this.HomeDeviceService.turnOnDevice(this.device?.hardwareId??"").subscribe(e=>this.successMessage="Device is now ON",e=>this.errorMessage=e.error.message)}static{this.\u0275fac=function(i){return new(i||t)(d(H))}}static{this.\u0275cmp=l({type:t,selectors:[["app-turn-on-device-button"]],inputs:{device:"device"},standalone:!0,features:[v],decls:4,vars:2,consts:[[3,"click"],[3,"message"]],template:function(i,n){i&1&&(s(0,"app-button",0),p("click",function(){return n.handleTurnOnDevice()}),m(1,"Turn on "),o(),c(2,"app-success-message",1)(3,"app-error-message",1)),i&2&&(r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[g,_,C]})}}return t})();var yt=()=>({required:"Custom Name is required"}),Ht=t=>({customName:t}),Pe=(()=>{class t{constructor(e,i,n,u){this.dialogRef=e,this.fb=i,this.HomeDeviceService=n,this.data=u,this.successMessage="",this.errorMessage="",this.device=null,this.device=u.device,this.form=this.fb.group({customName:[""]})}handleSubmit(){this.successMessage="",this.errorMessage="";let e={customName:this.form.value.customName};this.HomeDeviceService.renameDevice(e,this.device?.id??"").subscribe(i=>this.successMessage="Device renamed successfully",i=>this.errorMessage=i.error.message)}close(){this.dialogRef.close()}static{this.\u0275fac=function(i){return new(i||t)(d(oe),d(q),d(H),d(ne))}}static{this.\u0275cmp=l({type:t,selectors:[["app-rename-device-form"]],standalone:!0,features:[v],decls:10,vars:8,consts:[[2,"width","400px","height","400px","display","flex","flex-direction","column","padding","20px"],[2,"width","100%",3,"ngSubmit","formGroup"],["name","customName","type","text","label","Custom Name","placeholder","Name",3,"form","formField"],["type","submit","title","Apply",2,"margin","15px 0"],[3,"message"],["mat-button","",3,"click"]],template:function(i,n){i&1&&(s(0,"section",0)(1,"h2"),m(2,"Rename device"),o(),s(3,"form",1),p("ngSubmit",function(){return n.handleSubmit()}),c(4,"app-form-input",2)(5,"app-form-button",3),o(),c(6,"app-success-message",4)(7,"app-error-message",4),s(8,"button",5),p("click",function(){return n.close()}),m(9,"Cerrar"),o()()),i&2&&(r(3),a("formGroup",n.form),r(),a("form",n.form)("formField",w(6,Ht,L(5,yt))),r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[z,k,j,N,P,J,C,_]})}}return t})();var qe=(()=>{class t{constructor(e){this.dialog=e,this.device=null}openModal(){this.dialog.open(Pe,{data:{device:this.device}})}static{this.\u0275fac=function(i){return new(i||t)(d(re))}}static{this.\u0275cmp=l({type:t,selectors:[["app-rename-device-button"]],inputs:{device:"device"},standalone:!0,features:[v],decls:2,vars:0,consts:[[3,"click"]],template:function(i,n){i&1&&(s(0,"app-button",0),p("click",function(){return n.openModal()}),m(1,`Rename
`),o())},dependencies:[g]})}}return t})();var Ve=(()=>{class t{constructor(e){this.HomeDeviceService=e,this.device=null,this.successMessage="",this.errorMessage=""}handleTurnOnDevice(){this.successMessage="",this.errorMessage="",this.HomeDeviceService.turnOffDevice(this.device?.hardwareId??"").subscribe(e=>this.successMessage="Device is now OFF",e=>this.errorMessage=e.error.message)}static{this.\u0275fac=function(i){return new(i||t)(d(H))}}static{this.\u0275cmp=l({type:t,selectors:[["app-turn-off-device-button"]],inputs:{device:"device"},standalone:!0,features:[v],decls:4,vars:2,consts:[[3,"click"],[3,"message"]],template:function(i,n){i&1&&(s(0,"app-button",0),p("click",function(){return n.handleTurnOnDevice()}),m(1,"Turn off "),o(),c(2,"app-success-message",1)(3,"app-error-message",1)),i&2&&(r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[g,_,C]})}}return t})();function Dt(t,f){if(t&1&&(s(0,"option",4),m(1),o()),t&2){let e=f.$implicit;G("value",e.id),r(),te(e.name)}}function Ft(t,f){if(t&1){let e=B();s(0,"div",1)(1,"label",2),m(2,"Home Room"),o(),s(3,"select",3),p("change",function(n){D(e);let u=h();return F(u.onRoomChange(n))}),E(4,Dt,2,2,"option",4,T),o()(),s(6,"app-button",5),p("click",function(){D(e);let n=h();return F(n.handleAssign())}),m(7,"Assign"),o(),c(8,"app-success-message",6)(9,"app-error-message",6)}if(t&2){let e=h();r(4),O(e.rooms),r(4),a("message",e.successMessage),r(),a("message",e.errorMessage)}}function Tt(t,f){t&1&&(s(0,"p"),m(1,"This home has no rooms in it."),o())}var Ue=(()=>{class t{constructor(e,i,n){this.dialogRef=e,this.data=i,this.RoomService=n,this.errorMessage="",this.successMessage="",this.rooms=[],this.selectedRoomId=""}ngOnInit(){this.RoomService.getAllHomeRooms(this.data.homeId).subscribe(e=>{console.log(e),this.rooms=e,this.selectedRoomId=this.rooms.length>0?e[0].id:""},e=>console.error(e))}handleAssign(){this.errorMessage="",this.successMessage="",this.RoomService.assingHomeDeviceToRoom(this.selectedRoomId,this.data.device?.id??"").subscribe(e=>this.successMessage="Device assigned to room",e=>this.errorMessage=e.error.message)}onRoomChange(e){let i=e.target;this.selectedRoomId=i.value}static{this.\u0275fac=function(i){return new(i||t)(d(oe),d(ne),d(we))}}static{this.\u0275cmp=l({type:t,selectors:[["app-assing-device-to-room-form"]],standalone:!0,features:[v],decls:5,vars:1,consts:[[2,"width","400px","height","400px","display","flex","flex-direction","column","justify-content","space-evenly","align-items","center"],[2,"margin-bottom","20px"],["for","homerooms"],["id","homerooms","name","device",3,"change"],[3,"value"],[3,"click"],[3,"message"]],template:function(i,n){i&1&&(s(0,"article",0)(1,"h2"),m(2,"Assign device to room"),o(),b(3,Ft,10,2)(4,Tt,2,0),o()),i&2&&(r(3),S(3,n.rooms.length>0?3:4))},dependencies:[g,C,_]})}}return t})();var $e=(()=>{class t{constructor(e){this.dialog=e,this.device=null,this.homeId=""}openModal(){this.dialog.open(Ue,{data:{device:this.device,homeId:this.homeId}})}static{this.\u0275fac=function(i){return new(i||t)(d(re))}}static{this.\u0275cmp=l({type:t,selectors:[["app-assing-device-to-room-button"]],inputs:{device:"device",homeId:"homeId"},standalone:!0,features:[v],decls:2,vars:0,consts:[[3,"click"]],template:function(i,n){i&1&&(s(0,"app-button",0),p("click",function(){return n.openModal()}),m(1,"Assign to Room"),o())},dependencies:[g]})}}return t})();var Ge=(()=>{class t{constructor(e){this.HomeDeviceService=e,this.device=null,this.successMessage="",this.errorMessage=""}handleTurnOnDevice(){this.successMessage="",this.errorMessage="",this.HomeDeviceService.turnOnLamp(this.device?.hardwareId??"").subscribe(e=>this.successMessage="Lamp is now ON",e=>this.errorMessage=e.error.message)}static{this.\u0275fac=function(i){return new(i||t)(d(H))}}static{this.\u0275cmp=l({type:t,selectors:[["app-turn-on-lamp-button"]],inputs:{device:"device"},standalone:!0,features:[v],decls:4,vars:2,consts:[[3,"click"],[3,"message"]],template:function(i,n){i&1&&(s(0,"app-button",0),p("click",function(){return n.handleTurnOnDevice()}),m(1,"Ligth lamp"),o(),c(2,"app-success-message",1)(3,"app-error-message",1)),i&2&&(r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[g,C,_]})}}return t})();var ze=(()=>{class t{constructor(e){this.HomeDeviceService=e,this.device=null,this.successMessage="",this.errorMessage=""}handleTurnOnDevice(){this.successMessage="",this.errorMessage="",this.HomeDeviceService.turnOffLamp(this.device?.hardwareId??"").subscribe(e=>this.successMessage="Lamp is now OFF",e=>this.errorMessage=e.error.message)}static{this.\u0275fac=function(i){return new(i||t)(d(H))}}static{this.\u0275cmp=l({type:t,selectors:[["app-turn-off-lamp-button"]],inputs:{device:"device"},standalone:!0,features:[v],decls:4,vars:2,consts:[[3,"click"],[3,"message"]],template:function(i,n){i&1&&(s(0,"app-button",0),p("click",function(){return n.handleTurnOnDevice()}),m(1,"Turn off lamp"),o(),c(2,"app-success-message",1)(3,"app-error-message",1)),i&2&&(r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[g,C,_]})}}return t})();var Je=(()=>{class t{constructor(e){this.HomeDeviceService=e,this.device=null,this.successMessage="",this.errorMessage=""}handleTurnOnDevice(){this.successMessage="",this.errorMessage="",this.HomeDeviceService.turnOnSensor(this.device?.hardwareId??"").subscribe(e=>this.successMessage="Sensor is now OPEN",e=>this.errorMessage=e.error.message)}static{this.\u0275fac=function(i){return new(i||t)(d(H))}}static{this.\u0275cmp=l({type:t,selectors:[["app-turn-on-sensor-button"]],inputs:{device:"device"},standalone:!0,features:[v],decls:4,vars:2,consts:[[3,"click"],[3,"message"]],template:function(i,n){i&1&&(s(0,"app-button",0),p("click",function(){return n.handleTurnOnDevice()}),m(1,"Open sensor"),o(),c(2,"app-success-message",1)(3,"app-error-message",1)),i&2&&(r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[g,C,_]})}}return t})();var Ke=(()=>{class t{constructor(e){this.HomeDeviceService=e,this.device=null,this.successMessage="",this.errorMessage=""}handleTurnOnDevice(){this.successMessage="",this.errorMessage="",this.HomeDeviceService.turnOffSensor(this.device?.hardwareId??"").subscribe(e=>this.successMessage="Sensor is now CLOSED",e=>this.errorMessage=e.error.message)}static{this.\u0275fac=function(i){return new(i||t)(d(H))}}static{this.\u0275cmp=l({type:t,selectors:[["app-turn-off-sensor-button"]],inputs:{device:"device"},standalone:!0,features:[v],decls:4,vars:2,consts:[[3,"click"],[3,"message"]],template:function(i,n){i&1&&(s(0,"app-button",0),p("click",function(){return n.handleTurnOnDevice()}),m(1,"Close sensor"),o(),c(2,"app-success-message",1)(3,"app-error-message",1)),i&2&&(r(2),a("message",n.successMessage),r(),a("message",n.errorMessage))},dependencies:[g,_,C]})}}return t})();function Et(t,f){if(t&1&&(s(0,"span",12),m(1,"ACTIVE"),o(),c(2,"app-turn-off-device-button",10)),t&2){let e=h().$implicit;r(2),a("device",e)}}function Ot(t,f){if(t&1&&(s(0,"span",13),m(1,"NOT ACTIVE"),o(),c(2,"app-turn-on-device-button",10)),t&2){let e=h().$implicit;r(2),a("device",e)}}function Lt(t,f){if(t&1&&(s(0,"span",12),m(1,"ON"),o(),c(2,"app-turn-off-lamp-button",10)),t&2){let e=h(2).$implicit;r(2),a("device",e)}}function wt(t,f){if(t&1&&(s(0,"span",13),m(1,"OFF"),o(),c(2,"app-turn-on-lamp-button",10)),t&2){let e=h(2).$implicit;r(2),a("device",e)}}function Bt(t,f){if(t&1&&(s(0,"div",8),b(1,Lt,3,1)(2,wt,3,1),o()),t&2){let e=h().$implicit;r(),S(1,e!=null&&e.isOn?1:2)}}function Rt(t,f){if(t&1&&(s(0,"span",12),m(1,"OPEN"),o(),c(2,"app-turn-off-sensor-button",10)),t&2){let e=h(2).$implicit;r(2),a("device",e)}}function kt(t,f){if(t&1&&(s(0,"span",13),m(1,"CLOSED"),o(),c(2,"app-turn-on-sensor-button",10)),t&2){let e=h(2).$implicit;r(2),a("device",e)}}function At(t,f){if(t&1&&(s(0,"div",8),b(1,Rt,3,1)(2,kt,3,1),o()),t&2){let e=h().$implicit;r(),S(1,e!=null&&e.isOn?1:2)}}function Nt(t,f){if(t&1&&(s(0,"li")(1,"div",4),c(2,"img",5),o(),s(3,"div",6)(4,"div",7)(5,"div",8)(6,"strong"),m(7,"Name:"),o(),m(8),o(),s(9,"div",8)(10,"strong"),m(11,"Custom Name:"),o(),m(12),o(),s(13,"div",8)(14,"strong"),m(15,"Model:"),o(),m(16),o(),s(17,"div",8)(18,"strong"),m(19,"Room:"),o(),m(20),o()(),s(21,"div")(22,"div",8),b(23,Et,3,1)(24,Ot,3,1),o(),b(25,Bt,3,1,"div",9)(26,At,3,1,"div",9),o(),c(27,"app-rename-device-button",10)(28,"app-assing-device-to-room-button",11),o()()),t&2){let e=f.$implicit,i=h(2);r(2),_e("src","",e.mainPhoto," ",ee),G("alt",e.name),r(6),x(" ",e.name,""),r(4),x(" ",e.customName," "),r(4),x(" ",e.model,""),r(4),x(" ",e.room,""),r(3),S(23,e!=null&&e.isActive?23:24),r(2),a("ngIf",(e==null?null:e.deviceType)==="LAMP"),r(),a("ngIf",(e==null?null:e.deviceType)==="SENSOR"),r(),a("device",e),r(),a("homeId",i.homeId)("device",e)}}function jt(t,f){if(t&1&&(s(0,"ul"),E(1,Nt,29,13,"li",null,T),o()),t&2){let e=h();r(),O(e.homeDevices)}}function Pt(t,f){t&1&&(s(0,"p"),m(1,"There are'nt devices registered in this home."),o())}function qt(t,f){if(t&1&&b(0,Pt,2,0,"p"),t&2){let e=h();S(0,e.errorMessage?-1:0)}}var le=(()=>{class t{constructor(e){this.HomeService=e,this.homeDevices=[],this.homeId="",this.filterByRoom="",this.errorMessage="",this.successMessage=""}ngOnInit(){this.errorMessage="",this.successMessage="",this.HomeService.getHomeDevices(this.homeId,this.filterByRoom).subscribe(e=>{this.homeDevices=e},e=>this.errorMessage=e.error.message)}handleRefresh(){this.errorMessage="",this.successMessage="",this.HomeService.getHomeDevices(this.homeId,this.filterByRoom).subscribe(e=>{this.homeDevices=e},e=>this.errorMessage=e.error.message)}handleAddNewDevice(e){this.errorMessage="",this.successMessage="";let i={deviceId:e};this.HomeService.addNewDevice(this.homeId,i).subscribe(n=>this.successMessage="Device added to selected home",n=>this.errorMessage=n.error.message)}handleFilterChange(e){this.filterByRoom=e.target.value}static{this.\u0275fac=function(i){return new(i||t)(d(I))}}static{this.\u0275cmp=l({type:t,selectors:[["app-homedevices-list"]],inputs:{homeId:"homeId"},standalone:!0,features:[v],decls:16,vars:6,consts:[[3,"change","label","value"],[3,"click"],[3,"message"],[3,"deviceEmitter","displayButtons"],[1,"photo-container"],[3,"src","alt"],[1,"info-container"],[2,"display","flex","align-items","center"],[1,"col"],["class","col",4,"ngIf"],[3,"device"],[3,"homeId","device"],[1,"text-success"],[1,"text-danger"]],template:function(i,n){i&1&&(s(0,"article")(1,"h2"),m(2,"Listing of Home Devices"),o(),s(3,"app-input",0),p("change",function(y){return n.handleFilterChange(y)}),o(),s(4,"button",1),p("click",function(){return n.handleRefresh()}),m(5,"Refresh"),o(),c(6,"app-success-message",2)(7,"app-error-message",2),b(8,jt,3,0,"ul")(9,qt,1,1),c(10,"hr"),s(11,"h2"),m(12,"Register a new device to this home"),o(),s(13,"p"),m(14,"Please select the device you want to add to this home."),o(),s(15,"app-registered-devices-list",3),p("deviceEmitter",function(y){return n.handleAddNewDevice(y)}),o()()),i&2&&(r(3),a("label","Filter by room")("value",n.filterByRoom),r(3),a("message",n.successMessage),r(),a("message",n.errorMessage),r(),S(8,n.homeDevices.length>0?8:9),r(7),a("displayButtons",!0))},dependencies:[ie,Ce,C,_,Oe,je,qe,Ve,De,$e,Ge,ze,Je,Ke],styles:["ul[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:column;align-items:center;gap:3rem}li[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border:2px solid #224fca;border-radius:20px;padding:10px;gap:3rem}.photo-container[_ngcontent-%COMP%]{width:250px;max-width:250px}img[_ngcontent-%COMP%]{width:200px;height:200px;max-width:200px;max-height:200px}.info-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;gap:2rem;width:100%}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.text-success[_ngcontent-%COMP%]{color:green;font-weight:700}.text-danger[_ngcontent-%COMP%]{color:red;font-weight:700}"]})}}return t})();function Ut(t,f){if(t&1){let e=B();s(0,"li")(1,"strong"),m(2,"Alias:"),o(),m(3),c(4,"br"),s(5,"strong"),m(6,"Home street:"),o(),m(7),c(8,"br"),s(9,"strong"),m(10,"Home number:"),o(),m(11),c(12,"br"),s(13,"app-button",2),p("clicked",function(){let n=D(e).$implicit,u=h(2);return F(u.onClick(n.id))}),m(14,"Select"),o()()}if(t&2){let e=f.$implicit;r(3),x(" ",e.alias," "),r(4),x(" ",e.street," "),r(4),x(" ",e.number," ")}}function $t(t,f){if(t&1&&c(0,"app-rename-home-button",1),t&2){let e=h(2);a("homeId",e.selectedHomeId)}}function Gt(t,f){if(t&1&&(s(0,"ul"),E(1,Ut,15,3,"li",null,T),o(),b(3,$t,1,1,"app-rename-home-button",1)),t&2){let e=h();r(),O(e.homes),r(2),S(3,e.selectedHomeId?3:-1)}}function zt(t,f){t&1&&(s(0,"p"),m(1,"User is not a member of any house."),o())}var de=(()=>{class t{constructor(e){this.HomeService=e,this.homes=[],this.homeSelected=new $,this.selectedHomeId=""}ngOnInit(){this.loadHomes()}handleRefresh(){this.loadHomes()}onClick(e){this.selectedHomeId=e,this.homeSelected.emit(this.selectedHomeId)}loadHomes(){this.HomeService.getHomesByOwner().subscribe(e=>{this.homes=e,this.HomeService.getHomesByMember().subscribe(i=>{this.homes=[...this.homes,...i]},i=>{console.error("Error listing homes",i)})},e=>{console.error("Error listing homes",e)})}static{this.\u0275fac=function(i){return new(i||t)(d(I))}}static{this.\u0275cmp=l({type:t,selectors:[["app-home-integrants-list"]],outputs:{homeSelected:"homeSelected"},standalone:!0,features:[v],decls:7,vars:1,consts:[[3,"click"],[3,"homeId"],[3,"clicked"]],template:function(i,n){i&1&&(s(0,"article")(1,"h2"),m(2,"Listing of Homes"),o(),s(3,"button",0),p("click",function(){return n.handleRefresh()}),m(4," Refresh "),o(),b(5,Gt,4,1)(6,zt,2,0),o()),i&2&&(r(5),S(5,n.homes.length>0?5:6))},dependencies:[g,se]})}}return t})();function Kt(t,f){if(t&1&&c(0,"app-homedevices-list",1),t&2){let e=h();a("homeId",e.selectedHomeId)}}var Qe=(()=>{class t{constructor(){this.selectedHomeId=null}onHomeSelected(e){this.selectedHomeId=e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=l({type:t,selectors:[["app-homedevices"]],inputs:{selectedHomeId:"selectedHomeId"},decls:2,vars:1,consts:[[3,"homeSelected"],[3,"homeId"]],template:function(i,n){i&1&&(s(0,"app-home-integrants-list",0),p("homeSelected",function(y){return n.onHomeSelected(y)}),o(),b(1,Kt,1,1,"app-homedevices-list",1)),i&2&&(r(),S(1,n.selectedHomeId?1:-1))},dependencies:[le,de]})}}return t})();function Qt(t,f){if(t&1){let e=B();s(0,"li")(1,"strong"),m(2,"Alias:"),o(),m(3),c(4,"br"),s(5,"strong"),m(6,"Home street:"),o(),m(7),c(8,"br"),s(9,"strong"),m(10,"Home number:"),o(),m(11),c(12,"br"),s(13,"app-button",2),p("clicked",function(){let n=D(e).$implicit,u=h(2);return F(u.onClick(n.id))}),m(14,"Select"),o()()}if(t&2){let e=f.$implicit;r(3),x(" ",e.alias," "),r(4),x(" ",e.street," "),r(4),x(" ",e.number," ")}}function Wt(t,f){if(t&1&&c(0,"app-rename-home-button",1),t&2){let e=h(2);a("homeId",e.selectedHomeId)}}function Xt(t,f){if(t&1&&(s(0,"ul"),E(1,Qt,15,3,"li",null,T),o(),b(3,Wt,1,1,"app-rename-home-button",1)),t&2){let e=h();r(),O(e.homes),r(2),S(3,e.selectedHomeId?3:-1)}}function Yt(t,f){t&1&&(s(0,"p"),m(1,"User is not a member of any house."),o())}var We=(()=>{class t{constructor(e){this.HomeService=e,this.homes=[],this.homeSelected=new $,this.selectedHomeId=""}ngOnInit(){this.HomeService.getHomesByMember().subscribe(e=>{this.homes=e},e=>{console.error("Error listing homes",e)})}handleRefresh(){this.HomeService.getHomesByMember().subscribe(e=>{this.homes=e},e=>{console.error("Error listing homes",e)})}onClick(e){this.selectedHomeId=e,this.homeSelected.emit(this.selectedHomeId)}static{this.\u0275fac=function(i){return new(i||t)(d(I))}}static{this.\u0275cmp=l({type:t,selectors:[["app-member-home-list"]],outputs:{homeSelected:"homeSelected"},standalone:!0,features:[v],decls:7,vars:1,consts:[[3,"click"],[3,"homeId"],[3,"clicked"]],template:function(i,n){i&1&&(s(0,"article")(1,"h2"),m(2,"Listing of Homes"),o(),s(3,"button",0),p("click",function(){return n.handleRefresh()}),m(4," Refresh "),o(),b(5,Xt,4,1)(6,Yt,2,0),o()),i&2&&(r(5),S(5,n.homes.length>0?5:6))},dependencies:[g,se]})}}return t})();var Zt=[{path:"create",component:Be,canActivate:[W]},{path:"add-member",component:ke,canActivate:[W]},{path:"update-permissions",component:Ae,canActivate:[W]},{path:"devices",component:Qe,canActivate:[W]}],Sn=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=ge({type:t})}static{this.\u0275inj=he({imports:[ie,Me.forChild(Zt),me,K,ae,ce,Q,le,We,pe,de,Le,Ee,k]})}}return t})();export{Sn as HomePageModule};
