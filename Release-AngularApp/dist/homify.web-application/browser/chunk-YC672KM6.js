import{c as J,d as K,e as Q}from"./chunk-EURHNXKW.js";import{a as z}from"./chunk-LYRIO5X3.js";import{a as V}from"./chunk-366TOATH.js";import{a as q,b as P}from"./chunk-N3TGZAGV.js";import{a as I,c as x,d as S}from"./chunk-SYY7HDF4.js";import{c as C,q as O,r as G,s as L,x as $,z as U}from"./chunk-G254O7HO.js";import{D as r,Jb as s,Lb as b,Rb as v,Sa as a,Sb as T,Ta as p,Tb as N,_ as c,da as l,hb as M,ja as g,jb as f,mb as w,nb as B,ob as D,pb as j,qb as m,ra as R,rb as n,sa as F,sb as d,vb as A,ya as k,yb as u,zb as H}from"./chunk-NEYM5HGW.js";var W=(()=>{class o extends x{constructor(e){super(S.homifyApi,"homes",e)}create(e){return this.post(e).pipe(r(this.handleError))}getAllHomesByOwner(){return this.get("by-owner").pipe(r(this.handleError))}getAllHomesByMember(){return this.get("by-member").pipe(r(this.handleError))}UpdateHomeMembers(e,t){return this.putById(e,t,"members").pipe(r(this.handleError))}UpdateMembersPermissions(e,t,i){return this.putById(e,i,t).pipe(r(this.handleError))}GetHomeMembers(e){return this.get(`${e}/members`).pipe(r(this.handleError))}GetHomeDevices(e,t){return t?this.get(`${e}/devices?room=${t}`).pipe(r(this.handleError)):this.get(`${e}/devices`).pipe(r(this.handleError))}addNewDevice(e,t){return this.putById(e,t,"devices").pipe(r(this.handleError))}makeUserNotificable(e,t){return this.putById(`${e}/notifications`,t).pipe(r(this.handleError))}renameHome(e,t){return this.putById(`${e}/rename`,t).pipe(r(this.handleError))}static{this.\u0275fac=function(t){return new(t||o)(l(C))}}static{this.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var E=(()=>{class o{constructor(e){this._repository=e}create(e){return this._repository.create(e)}getHomesByOwner(){return this._repository.getAllHomesByOwner()}getHomesByMember(){return this._repository.getAllHomesByMember()}renameHome(e,t){return this._repository.renameHome(e,t)}UpdateMembers(e,t){return this._repository.UpdateHomeMembers(e,t)}UpdatePermissions(e,t,i){return this._repository.UpdateMembersPermissions(e,i,t)}GetMembers(e){return this._repository.GetHomeMembers(e)}getHomeDevices(e,t){return this._repository.GetHomeDevices(e,t)}addNewDevice(e,t){return this._repository.addNewDevice(e,t)}makeUserNotificable(e,t){return this._repository.makeUserNotificable(e,t)}static{this.\u0275fac=function(t){return new(t||o)(l(W))}}static{this.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var re=()=>({required:"Custom Name is required"}),ne=o=>({customName:o}),Y=(()=>{class o{constructor(e,t,i,h){this.dialogRef=e,this.fb=t,this.HomeService=i,this.data=h,this.successMessage="",this.errorMessage="",this.device=null,this.form=this.fb.group({customName:[""]})}handleSubmit(){this.successMessage="",this.errorMessage="";let e={alias:this.form.value.customName};this.HomeService.renameHome(this.data.homeId,e).subscribe(t=>this.successMessage="Home renamed successfully",t=>this.errorMessage=t.error.message)}close(){this.dialogRef.close()}static{this.\u0275fac=function(t){return new(t||o)(p(J),p($),p(E),p(K))}}static{this.\u0275cmp=g({type:o,selectors:[["app-rename-home-form"]],standalone:!0,features:[v],decls:10,vars:8,consts:[[2,"width","400px","height","400px","display","flex","flex-direction","column","padding","20px"],[2,"width","100%",3,"ngSubmit","formGroup"],["name","customName","type","text","label","Custom Name","placeholder","Name",3,"form","formField"],["type","submit","title","Apply",2,"margin","15px 0"],[3,"message"],["mat-button","",3,"click"]],template:function(t,i){t&1&&(m(0,"section",0)(1,"h2"),s(2,"Rename home"),n(),m(3,"form",1),u("ngSubmit",function(){return i.handleSubmit()}),d(4,"app-form-input",2)(5,"app-form-button",3),n(),d(6,"app-success-message",4)(7,"app-error-message",4),m(8,"button",5),u("click",function(){return i.close()}),s(9,"Cerrar"),n()()),t&2&&(a(3),f("formGroup",i.form),a(),f("form",i.form)("formField",N(6,ne,T(5,re))),a(2),f("message",i.successMessage),a(),f("message",i.errorMessage))},dependencies:[V,U,G,O,L,z,P,q]})}}return o})();var Z=(()=>{class o{constructor(e){this.dialog=e,this.homeId=""}openModal(){this.dialog.open(Y,{data:{homeId:this.homeId}})}static{this.\u0275fac=function(t){return new(t||o)(p(Q))}}static{this.\u0275cmp=g({type:o,selectors:[["app-rename-home-button"]],inputs:{homeId:"homeId"},standalone:!0,features:[v],decls:2,vars:0,consts:[[3,"click"]],template:function(t,i){t&1&&(m(0,"app-button",0),u("click",function(){return i.openModal()}),s(1,`Rename Home
`),n())},dependencies:[I]})}}return o})();function se(o,_){if(o&1){let e=A();m(0,"li")(1,"strong"),s(2,"Alias:"),n(),s(3),d(4,"br"),m(5,"strong"),s(6,"Home street:"),n(),s(7),d(8,"br"),m(9,"strong"),s(10,"Home number:"),n(),s(11),d(12,"br"),m(13,"app-button",2),u("clicked",function(){let i=R(e).$implicit,h=H(2);return F(h.onClick(i.id))}),s(14,"Select"),n()()}if(o&2){let e=_.$implicit;a(3),b(" ",e.alias," "),a(4),b(" ",e.street," "),a(4),b(" ",e.number," ")}}function me(o,_){if(o&1&&d(0,"app-rename-home-button",1),o&2){let e=H(2);f("homeId",e.selectedHomeId)}}function ae(o,_){if(o&1&&(m(0,"ul"),D(1,se,15,3,"li",null,B),n(),M(3,me,1,1,"app-rename-home-button",1)),o&2){let e=H();a(),j(e.homes),a(2),w(3,e.selectedHomeId?3:-1)}}function pe(o,_){o&1&&(m(0,"p"),s(1,"There aren't homes available."),n())}var Fe=(()=>{class o{constructor(e){this.HomeService=e,this.homes=[],this.homeSelected=new k,this.selectedHomeId=""}ngOnInit(){this.HomeService.getHomesByOwner().subscribe(e=>{this.homes=e},e=>{console.error("Error listing homes",e)})}handleRefresh(){this.HomeService.getHomesByOwner().subscribe(e=>{this.homes=e},e=>{console.error("Error listing homes",e)})}onClick(e){this.selectedHomeId=e,this.homeSelected.emit(this.selectedHomeId)}static{this.\u0275fac=function(t){return new(t||o)(p(E))}}static{this.\u0275cmp=g({type:o,selectors:[["app-owner-home-list"]],outputs:{homeSelected:"homeSelected"},standalone:!0,features:[v],decls:7,vars:1,consts:[[3,"click"],[3,"homeId"],[3,"clicked"]],template:function(t,i){t&1&&(m(0,"article")(1,"h2"),s(2,"Listing of Homes"),n(),m(3,"button",0),u("click",function(){return i.handleRefresh()}),s(4," Refresh "),n(),M(5,ae,4,1)(6,pe,2,0),n()),t&2&&(a(5),w(5,i.homes.length>0?5:6))},dependencies:[I,Z]})}}return o})();var ee=(()=>{class o extends x{constructor(e){super(S.homifyApi,"rooms",e)}create(e){return this.post(e).pipe(r(this.handleError))}getAllHomeRooms(e){return this.get(e).pipe(r(this.handleError))}assingHomeDeviceToRoom(e,t){return this.putById(`${e}/${t}`).pipe(r(this.handleError))}static{this.\u0275fac=function(t){return new(t||o)(l(C))}}static{this.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Ae=(()=>{class o{constructor(e){this._repository=e}create(e){return this._repository.create(e)}getAllHomeRooms(e){return this._repository.getAllHomeRooms(e)}assingHomeDeviceToRoom(e,t){return this._repository.assingHomeDeviceToRoom(e,t)}static{this.\u0275fac=function(t){return new(t||o)(l(ee))}}static{this.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{E as a,Z as b,Fe as c,Ae as d};
