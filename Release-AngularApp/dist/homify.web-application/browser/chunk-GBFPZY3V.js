import"./chunk-BYXBJQAS.js";import{a as D}from"./chunk-366TOATH.js";import{a as A,b as V}from"./chunk-N3TGZAGV.js";import{a as d,b as k,e as g}from"./chunk-SYY7HDF4.js";import{m as T,o as n,x as j}from"./chunk-G254O7HO.js";import{$ as x,Ac as E,Jb as f,Rb as U,Sa as o,Sb as m,Ta as v,Tb as a,_ as M,da as S,hb as R,ja as u,jb as i,ka as b,mb as q,qb as c,ra as w,rb as p,sa as N,sb as l,vb as P,yb as I,zb as C}from"./chunk-NEYM5HGW.js";var H=()=>({required:"Email is required"}),J=e=>({email:e}),K=()=>({required:"Password"}),Q=e=>({password:e}),W=()=>({required:"Name"}),X=e=>({name:e}),Z=()=>({required:"LastName"}),$=e=>({lastName:e}),ee=()=>({required:"Profile Picture"}),te=e=>({profilePicUrl:e});function re(e,G){e&1&&(c(0,"p"),f(1,"You are currently logged in, logout first in order to create a new account."),p())}function oe(e,G){if(e&1){let t=P();c(0,"form",1),I("submit",function(s){w(t);let F=C();return N(F.onSubmit(s))}),l(1,"app-form-input",2)(2,"app-form-input",3)(3,"app-form-input",4)(4,"app-form-input",5)(5,"app-form-input",6),c(6,"app-button",7),f(7,"Register"),p()(),l(8,"app-success-message",8)(9,"app-error-message",8)}if(e&2){let t=C();o(),i("form",t.form)("formField",a(14,J,m(13,H))),o(),i("form",t.form)("formField",a(17,Q,m(16,K))),o(),i("form",t.form)("formField",a(20,X,m(19,W))),o(),i("form",t.form)("formField",a(23,$,m(22,Z))),o(),i("form",t.form)("formField",a(26,te,m(25,ee))),o(),i("type","submit"),o(2),i("message",t.successMessage),o(),i("message",t.errorMessage)}}var h=(()=>{class e{constructor(t,r){this.fb=t,this.sessionService=r,this.currentUserToken=null,this.errorMessage="",this.successMessage="",this.form=this.fb.group({email:["",[n.required,n.email]],password:["",[n.required]],name:["",[n.required]],lastName:["",[n.required]],profilePicUrl:["",[n.required]]})}ngOnInit(){let{token:t}=this.sessionService.getCurrentUser();this.currentUserToken=t??null}onSubmit(t){if(t.preventDefault(),this.errorMessage="",this.successMessage="",!this.form.valid){this.errorMessage="Form is not valid";return}let{email:r,password:s,name:F,lastName:O,profilePicUrl:Y}=this.form.value;this.sessionService.register(r,s,F,O,Y).subscribe(_=>{this.errorMessage="",this.successMessage="Account created successfully!"},_=>{this.errorMessage=_.error.message,this.successMessage=""})}static{this.\u0275fac=function(r){return new(r||e)(v(j),v(g))}}static{this.\u0275cmp=u({type:e,selectors:[["app-register-form"]],standalone:!0,features:[U],decls:5,vars:1,consts:[[1,"login-container"],["form","form",1,"'form'",3,"submit"],["name","email","type","mail","label","Email","placeholder","Email",3,"form","formField"],["name","password","type","password","label","Password","placeholder","Password",3,"form","formField"],["name","name","type","text","label","Name","placeholder","Name",3,"form","formField"],["name","lastName","type","text","label","LastName","placeholder","LastName",3,"form","formField"],["name","profilePicUrl","type","text","label","Profile Picture","placeholder","hello.png",3,"form","formField"],[3,"type"],[3,"message"]],template:function(r,s){r&1&&(c(0,"div",0)(1,"h2"),f(2,"Create account"),p(),R(3,re,2,0,"p")(4,oe,10,28),p()),r&2&&(o(3),q(3,s.currentUserToken?3:4))},dependencies:[D,d,V,A]})}}return e})();var B=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=u({type:e,selectors:[["app-register"]],decls:1,vars:0,template:function(r,s){r&1&&l(0,"app-register-form")},dependencies:[h]})}}return e})();var L=(()=>{class e{constructor(t){this.SessionService=t}canActivate(){let{token:t}=this.SessionService.getCurrentUser();return!t}static{this.\u0275fac=function(r){return new(r||e)(S(g))}}static{this.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ne=[{path:"",component:B,canActivate:[L]}],xe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=b({type:e})}static{this.\u0275inj=x({imports:[d,k,h,E,T.forChild(ne)]})}}return e})();export{xe as RegisterModule};
